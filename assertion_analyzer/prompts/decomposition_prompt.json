{
  "name": "decomposition_prompt",
  "version": "3.0",
  "description": "Decompose free-form assertions into atomic S+G units",
  "source": "GPT-5 optimization sessions 018-020 (2025-11-30)",
  "system_prompt": "You are an expert in requirements decomposition for the WBP (Workback Plan) framework. Your task is to break down free-form assertions into atomic S+G units. Each unit tests exactly ONE structural requirement with its linked grounding checks. Return structured JSON only.",
  "user_prompt_template": "Decompose this free-form assertion into ATOMIC S+G units.\n\n=== ASSERTION ===\n\"{assertion_text}\"\n\n=== S DIMENSIONS (Structural - what must exist) ===\nS1: Title - meeting/event title or name\nS2: Timeline Alignment - time constraints, tight timeline disclosure\nS3: Ownership Assignment - task owner assignment\nS4: Participant Identification - attendees, stakeholders\nS5: Task Dates - when tasks are scheduled (before/after T₀)\nS6: Risk Assessment - risks, mitigation, escalation\nS8: Task Descriptions - what tasks involve\nS9: Success Criteria - definition of done\nS10: Buffer Time - contingency or slack time\nS16: Assumptions & Prerequisites - stated assumptions\nS17: Dependencies - task dependencies\nS18: Milestones - key checkpoints\nS19: Communication Plan - sharing, notification actions\nS20: Review & Approval - review cycles, sign-offs\n\n=== G DIMENSIONS (Grounding - values must match source) ===\nG1: Hallucination Prevention - no invented details\nG2: Attendee Grounding - person names match source\nG3: Date/Time Grounding - dates/times match source\nG4: Artifact Grounding - files/documents match source\nG5: Topic Grounding - topics/subjects match source\nG6: Action Item Grounding - tasks match source\nG7: Role Grounding - roles match source\nG8: Constraint Grounding - limits match source\nG9: Planner-Generated Consistency - generated content consistent\n\n=== S→G MAPPINGS ===\nS1 → G5 (title is a topic)\nS3 → G2, G6 (owner name + task)\nS4 → G2, G7 (attendee names + roles)\nS5 → G3 (task dates)\nS16 → G5, G6, G9 (assumptions about topics/tasks)\nS19 → G2, G4, G6 (share with person, artifact, action)\n\n=== DECOMPOSITION RULES ===\n1. Split into ATOMIC units - each unit = ONE S dimension\n2. If assertion has multiple structural requirements → multiple units\n3. Extract slot_value for each G dimension from the assertion text\n4. If purely grounding (no structural requirement) → s_dimension: null\n5. Return ONLY JSON array, no extra text\n\n=== EXAMPLES ===\n\nExample 1 (Multi-S decomposition):\nInput: \"state that the meeting '1:1 Review' is scheduled for July 26 at 14:00 PST\"\nOutput:\n[\n  {\"s_dimension\": \"S1\", \"s_name\": \"Title\", \"s_assertion\": \"State the meeting title\",\n   \"linked_g\": [{\"g_dimension\": \"G5\", \"slot_value\": \"1:1 Review\"}]},\n  {\"s_dimension\": \"S5\", \"s_name\": \"Task Dates\", \"s_assertion\": \"State the meeting date/time\",\n   \"linked_g\": [{\"g_dimension\": \"G3\", \"slot_value\": \"July 26 at 14:00 PST\"}]}\n]\n\nExample 2 (Single S with multiple G):\nInput: \"assign Tisa Odonoghue as owner for confirming agenda and distributing pre-reads\"\nOutput:\n[\n  {\"s_dimension\": \"S3\", \"s_name\": \"Ownership Assignment\", \"s_assertion\": \"Assign task owner\",\n   \"linked_g\": [\n     {\"g_dimension\": \"G2\", \"slot_value\": \"Tisa Odonoghue\"},\n     {\"g_dimension\": \"G6\", \"slot_value\": [\"confirming agenda\", \"distributing pre-reads\"]}\n   ]}\n]\n\nExample 3 (Pure grounding - no S):\nInput: \"not introduce any attendee other than those in the source\"\nOutput:\n[\n  {\"s_dimension\": null, \"s_name\": null, \"s_assertion\": null,\n   \"linked_g\": [{\"g_dimension\": \"G2\", \"slot_value\": null, \"constraint\": \"no new attendees\"}]}\n]\n\nExample 4 (Communication with artifacts):\nInput: \"share pre-reads referencing 'Report.xlsx' and 'Guide.docx' by July 26, 00:15 PST\"\nOutput:\n[\n  {\"s_dimension\": \"S19\", \"s_name\": \"Communication Plan\", \"s_assertion\": \"Share pre-read materials\",\n   \"linked_g\": [\n     {\"g_dimension\": \"G4\", \"slot_value\": [\"Report.xlsx\", \"Guide.docx\"]},\n     {\"g_dimension\": \"G3\", \"slot_value\": \"July 26, 00:15 PST\"}\n   ]}\n]\n\n=== NOW DECOMPOSE ===\nReturn ONLY a JSON array of atomic units.",
  "output_schema": {
    "type": "array",
    "items": {
      "type": "object",
      "required": ["s_dimension", "s_name", "s_assertion", "linked_g"],
      "properties": {
        "s_dimension": {
          "type": ["string", "null"],
          "description": "S dimension code (S1-S20) or null if pure grounding"
        },
        "s_name": {
          "type": ["string", "null"],
          "description": "S dimension name or null"
        },
        "s_assertion": {
          "type": ["string", "null"],
          "description": "Atomic structural requirement description"
        },
        "linked_g": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "g_dimension": {"type": "string"},
              "slot_value": {"type": ["string", "array", "null"]},
              "constraint": {"type": "string", "description": "Optional constraint description for pure G"}
            }
          }
        }
      }
    }
  },
  "temperature": 0.2,
  "notes": [
    "Version 3.0: Decomposition into atomic S+G units",
    "Key insight: S+G are atomic, free-form assertions are not",
    "One assertion can decompose into multiple S units",
    "Each S unit has linked G dimensions with extracted slot values",
    "Pure G assertions (no structural requirement) have s_dimension: null",
    "Synthesized from GPT-5 sessions 018, 019, 020"
  ]
}
